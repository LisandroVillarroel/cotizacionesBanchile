<div class="container-fluid d-flex justify-around p-0 mb-2">
  <h1 mat-dialog-title class="titulo centraVertical">Solicitudes asociadas a mi usuario</h1>
</div>

<mat-card class="alinea-card-gestion">
  <mat-card-content class="d-flex p-0 justify-around" style="width: 100%">
    <div class="container-fluid p-0">
      <div
        [formGroup]="filtroFormulario()"
        class="box-form-fields p-2 mt-0 gap-2"
        style="align-items: center"
      >
        <div class="gap-1" style="width: 7%; font-size: 14px !important">
          <span class="gris"> Filtrar por: </span>
        </div>
        <div style="width: 20%">
          <mat-form-field class="inputSelect">
            <mat-label class="cursiva gris-claro">Coordinador</mat-label>
            <mat-select [formControl]="coordinador">
              @for (_coordinador of coordinadores(); track _coordinador) {
                <mat-option [value]="_coordinador.p_nombre_coordinador">
                  {{ _coordinador.p_nombre_coordinador }}
                </mat-option>
              }
              <input matInput />
            </mat-select>
          </mat-form-field>
        </div>
        <div style="width: 20%">
          <mat-form-field class="inputSelect">
            <mat-label class="cursiva gris-claro">Ejecutivo</mat-label>
            <mat-select [formControl]="ejecutivo">
              @for (_ejecutivo of ejecutivos(); track _ejecutivo) {
                <mat-option [value]="_ejecutivo.nombre_ejecutivo_banco">
                  {{ _ejecutivo.nombre_ejecutivo_banco }}
                </mat-option>
              }
              <input matInput />
            </mat-select>
          </mat-form-field>
        </div>
        <div style="width: 15%">
          <mat-form-field class="inputSelect">
            <mat-label class="cursiva gris-claro">Rubro</mat-label>
            <mat-select [formControl]="rubro" (selectionChange)="seleccionaRubro($event.value)">
              @for (_rubros of datoRubros(); track _rubros) {
                <mat-option [value]="_rubros">
                  {{ _rubros.nombre_rubro }}
                </mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
        <div style="width: 15%">
          <mat-form-field class="inputSelect">
            <mat-label class="cursiva gris-claro">Tipo de seguro</mat-label>
            <mat-select [formControl]="seguro">
              @for (_seguros of rescatadoSeguro(); track _seguros) {
                <mat-option [value]="_seguros.nombre_tipo_seguro">
                  {{ _seguros.nombre_tipo_seguro }}
                </mat-option>
              }
              <input matInput />
            </mat-select>
          </mat-form-field>
        </div>
        <div style="width: 15%">
          <mat-form-field class="inputSelect">
            <mat-label class="cursiva gris-claro">Estado</mat-label>
            <mat-select [formControl]="estado">
              @for (_estados of datosEstados(); track _estados) {
                <mat-option [value]="_estados.nombre_estado">
                  {{ _estados.nombre_estado }}
                </mat-option>
              }
              <input matInput />
            </mat-select>
          </mat-form-field>
        </div>
        <!--         <div style="width: 20%;">
            <mat-form-field class="inputSelect" style="width: 100%;">
              <mat-label class="cursiva gris-claro">Fecha</mat-label>
              <input matInput [matDatepicker]="picker" [formControl]="fecha">
              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div> -->
        <div style="width: 10%; align-items: center">
          <button
            (click)="limpiaFiltros()"
            mat-button
            class="button-link"
            style="width: 100%; font-size: 14px !important; align-items: center !important"
          >
            Limpiar filtros
          </button>
        </div>
      </div>
      <div class="mat-elevation-z8 mt-0">
        <mat-card-actions>
          <div class="botones-derecha">
            <button type="button" mat-raised-button class="btn-info" (click)="derivar()">
              Derivar
            </button>
          </div>
        </mat-card-actions>

        <!--         <table mat-table [dataSource]="dataSourceSolicitud()" multiTemplateDataRows matSort>
            <ng-container matColumnDef="selected">
              <th id="checkI" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 4%">
                Seleccionar
              </th>
              <td mat-cell *matCellDef="let element; class="gris" style="width: 4%">
                <input type="checkbox" [(ngModel)]="element.selected" />
              </td>
            </ng-container>
            <ng-container matColumnDef="id_solicitud">
              <th id="_id" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 5%"> ID </th>
              <td mat-cell *matCellDef="let element" style="width: 5%"> {{element.id_solicitud}} </td>
            </ng-container>
            <ng-container matColumnDef="fecha_creacion">
              <th id="_fecha" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 8%"> Fecha </th>
              <td mat-cell *matCellDef="let element" style="width: 8%">
                {{element.fecha_creacion | date: 'dd/MM/yyyy'  }} </td>
            </ng-container>
            <ng-container matColumnDef="rut_contratante">
              <th id="_rut" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 8%">
                RUT
              </th>
              <td mat-cell *matCellDef="let element" style="width: 8%">
                {{ element.rut_contratante }}</td>
            </ng-container>
            <ng-container matColumnDef="nombre_razon_social_contratante">
              <th id="_contratante" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 15%">
                Contratante
              </th>
              <td mat-cell *matCellDef="let element" style="width: 15%">
                {{ element.nombre_razon_social_contratante }}</td>
            </ng-container>

            <ng-container matColumnDef="nombre_rubro">
              <th id="_rubro" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 8%">
                Rubro
              </th>
              <td mat-cell *matCellDef="let element" style="width: 8%">{{ element.nombre_rubro }}</td>
            </ng-container>

            <ng-container matColumnDef="nombre_tipo_seguro">
              <th id="_tipoSeguro" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 16%">
                Tipo Seguro
              </th>
              <td mat-cell *matCellDef="let element" style="width: 16%">
                {{ element.nombre_tipo_seguro }}</td>
            </ng-container>
            <ng-container matColumnDef="nombre_ejecutivo_banco">
              <th id="_ejecutivo" mat-header-cell *matHeaderCellDef mat-sort-header
                style="width: 15%"> Ejecutivo </th>
              <td mat-cell *matCellDef="let element" style="width: 15%">
                {{element.nombre_ejecutivo_banco}}</td>
            </ng-container>
            <ng-container matColumnDef="nombre_coordinador">
              <th id="_coordinador" mat-header-cell *matHeaderCellDef mat-sort-header
                style="width: 15%"> Coordinador </th>
              <td mat-cell *matCellDef="let element" style="width: 15%">
                {{element.nombre_coordinador}}</td>
            </ng-container>
            <ng-container matColumnDef="id_estado_solicitud">
              <th id="_estado" mat-header-cell *matHeaderCellDef mat-sort-header style="width: 15%"> Estado </th>
              <td mat-cell *matCellDef="let element" style="width: 15%">
                <div [ngStyle]="getCellStyle(element.id_estado_solicitud)">{{element.descripcion_estado}}</div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table> -->
        @if (this.dataSourceSolicitud().data.length === 0) {
          <div class="info SinInfoTabla">No hay solicitudes para mostrar</div>
        }
        <mat-paginator #myPaginator [pageSizeOptions]="[10, 20, 30, 100]"></mat-paginator>
      </div>
    </div>
  </mat-card-content>
</mat-card>
